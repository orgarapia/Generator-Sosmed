<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Caption AI - Buat Caption Menarik Seketika</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #0F2027;  /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #2C5364, #203A43, #0F2027);
            background: linear-gradient(to right, #2C5364, #203A43, #0F2027);
        }
        textarea::placeholder { color: #9ca3af; }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .result-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        /* Custom radio button style */
        .platform-radio input[type="radio"], .mode-radio input[type="radio"] { display: none; }
        .platform-radio label, .mode-radio label {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .platform-radio input[type="radio"]:checked + label, .mode-radio input[type="radio"]:checked + label {
            transform: scale(1.05);
            color: white;
        }
        .mode-radio input[type="radio"]:checked + label {
            background-color: rgba(96, 165, 250, 0.5);
            border-color: #60a5fa;
        }

        /* --- WARNA BRAND BARU --- */
        #instagram:checked + label {
            background-color: rgba(225, 48, 108, 0.5); /* Instagram Pink transparent */
            border-color: #E1306C;
        }
        #tiktok:checked + label {
            background-color: rgba(0, 242, 234, 0.5); /* TikTok Cyan/Teal transparent */
            border-color: #FF0050; /* TikTok Pink/Red */
        }
        #twitter:checked + label {
            background-color: rgba(255, 255, 255, 0.3); /* White/light grey transparent */
            border-color: #ffffff;
        }
        #facebook:checked + label {
            background-color: rgba(24, 119, 242, 0.5); /* Facebook Blue transparent */
            border-color: #1877F2;
        }
    </style>
</head>
<body class="text-slate-100">

    <div class="container mx-auto max-w-3xl px-4 py-8 md:py-16 min-h-screen flex flex-col justify-center">

        <!-- Header -->
        <header class="text-center mb-10">
             <div class="inline-block bg-clip-text text-transparent bg-gradient-to-r from-teal-300 via-blue-400 to-purple-500 mb-4">
                 <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sparkles inline-block"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>
            </div>
            <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight text-white">
                Ubah Ide Jadi <span class="bg-clip-text text-transparent bg-gradient-to-r from-teal-300 to-blue-500">Kata-Kata Ajaib</span>
            </h1>
            <p class="mt-4 text-lg text-slate-400 max-w-xl mx-auto">
                AI kami siap meracik caption & teks estetik untuk semua kebutuhan media sosial Anda.
            </p>
        </header>

        <!-- Kotak Generator Utama -->
        <main class="glass-effect p-6 md:p-8 rounded-2xl shadow-2xl">
            <div class="space-y-6">
                <!-- PEMILIHAN MODE BARU -->
                <div>
                    <label class="block text-md font-semibold text-slate-200 mb-3">1. Apa yang ingin Anda buat?</label>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="mode-radio">
                            <input type="radio" id="mode-caption" name="mode" value="caption" checked>
                            <label for="mode-caption" class="flex items-center justify-center gap-2 p-3 border-2 border-slate-600 rounded-lg glass-effect">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h16"/><path d="M4 12h16"/><path d="M4 18h12"/></svg>
                                <span>Generator Caption</span>
                            </label>
                        </div>
                        <div class="mode-radio">
                            <input type="radio" id="mode-image-text" name="mode" value="image-text">
                            <label for="mode-image-text" class="flex items-center justify-center gap-2 p-3 border-2 border-slate-600 rounded-lg glass-effect">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 3 7 19 7-19-7 19-7-19"/><path d="m3 12h18"/></svg>
                                <span>Teks untuk Gambar</span>
                            </label>
                        </div>
                    </div>
                </div>

                <hr class="border-slate-700">

                <!-- Konten Generator -->
                <div id="generator-content" class="space-y-6">
                    <div>
                        <label for="topic-input" class="block text-md font-semibold text-slate-200 mb-2">2. Topik / Mood Konten Anda</label>
                        <textarea id="topic-input" rows="3" class="w-full p-4 bg-slate-800/50 text-white border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-shadow duration-200" placeholder="Contoh: secangkir kopi hangat di pagi yang hujan..."></textarea>
                        <div class="text-right mt-2">
                            <button id="idea-helper-btn" class="text-sm text-blue-400 hover:text-blue-300 transition-colors">
                                üß† Butuh inspirasi topik?
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <label for="tone-select" class="block text-md font-semibold text-slate-200 mb-2">3. Pilih Gaya Bahasa</label>
                        <select id="tone-select" class="w-full p-4 bg-slate-800/50 text-white border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-shadow duration-200">
                            <option value="santai">Santai & Ramah</option>
                            <option value="profesional">Profesional</option>
                            <option value="lucu">Lucu & Jenaka</option>
                            <option value="puitis">Puitis & Mendalam</option>
                            <option value="promosi">Promosi & Menjual</option>
                            <option value="galau">Galau</option>
                        </select>
                    </div>

                    <!-- Pilihan Panjang Caption BARU -->
                    <div>
                        <label for="length-select" class="block text-md font-semibold text-slate-200 mb-2">4. Pilih Panjang Caption</label>
                        <select id="length-select" class="w-full p-4 bg-slate-800/50 text-white border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-shadow duration-200">
                            <option value="pendek">Pendek (1-2 kalimat)</option>
                            <option value="sedang" selected>Sedang (1 paragraf)</option>
                            <option value="panjang">Panjang (Beberapa paragraf)</option>
                        </select>
                    </div>

                    <!-- Langkah 5: Pilih Media Sosial (Hanya untuk mode Caption) -->
                    <div id="platform-selection-wrapper">
                        <label class="block text-md font-semibold text-slate-200 mb-3">5. Pilih Media Sosial</label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3" id="platform-select">
                            <div class="platform-radio">
                                <input type="radio" id="instagram" name="platform" value="instagram" checked>
                                <label for="instagram" class="flex flex-col items-center justify-center p-3 border-2 border-slate-600 rounded-lg glass-effect">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                                    <span class="mt-2 text-sm font-semibold">Instagram</span>
                                </label>
                            </div>
                            <div class="platform-radio">
                                <input type="radio" id="tiktok" name="platform" value="tiktok">
                                <label for="tiktok" class="flex flex-col items-center justify-center p-3 border-2 border-slate-600 rounded-lg glass-effect">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.03-4.83-.95-6.43-2.98-1.6-2.04-1.96-4.82-1.3-7.14.65-2.29 2.66-4.17 4.96-4.42 2.3-.25 4.58.22 6.18 1.88.02-3.54.01-7.08.01-10.62Z"/></svg>
                                    <span class="mt-2 text-sm font-semibold">TikTok</span>
                                </label>
                            </div>
                            <div class="platform-radio">
                                <input type="radio" id="twitter" name="platform" value="twitter">
                                <label for="twitter" class="flex flex-col items-center justify-center p-3 border-2 border-slate-600 rounded-lg glass-effect">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                                    <span class="mt-2 text-sm font-semibold">X / Twitter</span>
                                </label>
                            </div>
                            <div class="platform-radio">
                                <input type="radio" id="facebook" name="platform" value="facebook">
                                <label for="facebook" class="flex flex-col items-center justify-center p-3 border-2 border-slate-600 rounded-lg glass-effect">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
                                    <span class="mt-2 text-sm font-semibold">Facebook</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tombol Aksi -->
            <div class="mt-8">
                <button id="generate-btn" class="w-full flex items-center justify-center gap-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-4 px-6 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wand-2"><path d="m3 21 1.65-1.65a4 4 0 0 0 5.66 0l2.83-2.83a4 4 0 0 0 0-5.66L9.31 6.99a4 4 0 0 0-5.66 0L2 8.65V3h5.65L12 7.35a4 4 0 0 1 5.66 0l2.83 2.83a4 4 0 0 1 0 5.66l-1.65 1.65L21 21Z"/></svg>
                    Buat Keajaiban!
                </button>
            </div>
        </main>
        
        <!-- Area Hasil -->
        <section id="results-section" class="mt-12">
            <div id="results-placeholder" class="text-center text-slate-400 py-10 px-6 glass-effect rounded-lg">
                <p>Hasil Anda akan muncul di sini...</p>
            </div>
            
            <div id="loading-spinner" class="hidden text-center py-10">
                 <div class="flex justify-center items-center gap-3">
                    <svg class="animate-spin h-6 w-6 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <span class="text-slate-300 font-medium">AI sedang meracik kata...</span>
                </div>
            </div>

            <!-- Konten Hasil -->
            <div id="results-content" class="hidden space-y-6">
                <!-- Hasil untuk Mode Caption -->
                <div id="caption-results-wrapper">
                    <div id="instagram-results" class="platform-result space-y-6">
                        <div class="result-card glass-effect rounded-xl p-5">
                            <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-teal-300">‚ú®</span> Ide Caption untuk Instagram</h3>
                            <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="ig-caption" class="text-slate-300 text-sm"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="ig-caption" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                            </div>
                        </div>
                        <div class="result-card glass-effect rounded-xl p-5">
                            <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-blue-400">#</span> Tagar Relevan</h3>
                            <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="ig-hashtags" class="text-slate-400 text-xs font-mono break-all"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="ig-hashtags" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                            </div>
                        </div>
                    </div>
                    <div id="tiktok-results" class="platform-result hidden space-y-6">
                         <div class="result-card glass-effect rounded-xl p-5">
                            <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-red-400">üéµ</span> Ide Caption untuk TikTok</h3>
                            <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                               <p id="tt-caption" class="text-slate-300 text-sm"></p>
                               <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="tt-caption" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                            </div>
                        </div>
                        <div class="result-card glass-effect rounded-xl p-5">
                            <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-cyan-400">#</span> Tagar Trending</h3>
                             <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="tt-hashtags" class="text-slate-400 text-xs font-mono break-all"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="tt-hashtags" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                             </div>
                        </div>
                    </div>
                    <div id="twitter-results" class="platform-result hidden space-y-6">
                        <div class="result-card glass-effect rounded-xl p-5">
                            <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-purple-400">‚úçÔ∏è</span> Ide Tweet</h3>
                             <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="tw-tweet" class="text-slate-300 text-sm"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="tw-tweet" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                             </div>
                        </div>
                         <div class="result-card glass-effect rounded-xl p-5">
                            <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-blue-400">#</span> Tagar Singkat</h3>
                             <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="tw-hashtags" class="text-slate-400 text-xs font-mono break-all"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="tw-hashtags" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                             </div>
                        </div>
                    </div>
                     <div id="facebook-results" class="platform-result hidden space-y-6">
                        <div class="result-card glass-effect rounded-xl p-5">
                            <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-blue-500">üëç</span> Ide Postingan Facebook</h3>
                            <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="fb-post" class="text-slate-300 text-sm"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="fb-post" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Hasil untuk Mode Teks di Gambar BARU -->
                <div id="image-text-results" class="platform-result hidden">
                    <div class="result-card glass-effect rounded-xl p-5">
                        <h3 class="font-bold text-lg mb-4 text-white flex items-center gap-2"><span class="text-amber-300">‚úçÔ∏è</span> Pilihan Teks untuk Gambar Anda</h3>
                        <div id="image-text-list" class="space-y-3">
                            <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="img-text-1" class="text-slate-300 text-sm"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="img-text-1" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="img-text-2" class="text-slate-300 text-sm"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="img-text-2" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-lg flex justify-between items-center gap-3">
                                <p id="img-text-3" class="text-slate-300 text-sm"></p>
                                <button class="copy-btn flex-shrink-0 bg-slate-700 hover:bg-slate-600 p-2 rounded-md transition-colors" data-copy-target="img-text-3" title="Salin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center mt-16 text-slate-500 text-sm">
            <p>&copy; 2025 CaptionAI. Dibuat untuk mempermudah hidup Anda.</p>
        </footer>
    </div>
    
    <!-- Modal Bantuan Ide BARU -->
    <div id="idea-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50">
        <div class="glass-effect w-full max-w-lg rounded-2xl p-6 relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h3 class="text-xl font-bold text-white mb-6">Pilih Inspirasi Topik</h3>
            <div class="space-y-4 max-h-[60vh] overflow-y-auto pr-2">
                <!-- Kategori Galau -->
                <div>
                    <h4 class="font-semibold text-teal-300 mb-2">üíî Galau & Patah Hati</h4>
                    <div class="flex flex-wrap gap-2">
                        <button class="topic-idea-btn">Kenangan tentang dia yang tiba-tiba muncul</button>
                        <button class="topic-idea-btn">Mencoba ikhlas melepaskan seseorang</button>
                        <button class="topic-idea-btn">Rindu suasana yang tidak bisa kembali</button>
                        <button class="topic-idea-btn">Merasa sendirian di tengah keramaian</button>
                    </div>
                </div>
                <!-- Kategori Semangat -->
                <div>
                    <h4 class="font-semibold text-blue-400 mb-2">üí™ Semangat & Motivasi</h4>
                    <div class="flex flex-wrap gap-2">
                        <button class="topic-idea-btn">Memulai hari Senin dengan energi baru</button>
                        <button class="topic-idea-btn">Jangan menyerah, sedikit lagi sampai</button>
                        <button class="topic-idea-btn">Merayakan pencapaian kecil hari ini</button>
                        <button class="topic-idea-btn">Belajar dari sebuah kegagalan</button>
                    </div>
                </div>
                 <!-- Kategori Cinta -->
                <div>
                    <h4 class="font-semibold text-pink-400 mb-2">‚ù§Ô∏è Cinta & Kasih Sayang</h4>
                    <div class="flex flex-wrap gap-2">
                        <button class="topic-idea-btn">Ucapan terima kasih untuk pasangan</button>
                        <button class="topic-idea-btn">Menghabiskan waktu berkualitas bersama dia</button>
                        <button class="topic-idea-btn">Betapa beruntungnya memilikimu</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Variabel Elemen ---
            const modeRadios = document.querySelectorAll('input[name="mode"]');
            const platformSelectionWrapper = document.getElementById('platform-selection-wrapper');
            const lengthSelectionWrapper = document.getElementById('length-select').parentElement; 
            
            const generateBtn = document.getElementById('generate-btn');
            const resultsPlaceholder = document.getElementById('results-placeholder');
            const loadingSpinner = document.getElementById('loading-spinner');
            const resultsContent = document.getElementById('results-content');
            
            const captionResultsWrapper = document.getElementById('caption-results-wrapper');
            const imageTextResults = document.getElementById('image-text-results');

            const ideaHelperBtn = document.getElementById('idea-helper-btn');
            const ideaModal = document.getElementById('idea-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const topicIdeas = document.querySelectorAll('.topic-idea-btn');
            const topicInput = document.getElementById('topic-input');
            const toneSelect = document.getElementById('tone-select');
            const lengthSelect = document.getElementById('length-select');

            // --- Logika untuk mengaktifkan tombol Generate ---
            function checkInputs() {
                if (topicInput.value.trim() !== '') {
                    generateBtn.disabled = false;
                } else {
                    generateBtn.disabled = true;
                }
            }
            topicInput.addEventListener('input', checkInputs);
            checkInputs(); // Panggil saat awal
            
            // --- Logika Pemilihan Mode ---
            modeRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const isCaptionMode = e.target.value === 'caption';
                    platformSelectionWrapper.style.display = isCaptionMode ? 'block' : 'none';
                    lengthSelectionWrapper.style.display = isCaptionMode ? 'block' : 'none';
                });
            });

            // --- Logika Tombol Generate ---
            async function handleGeneration() {
                // Kumpulkan semua data dari input
                const payload = {
                    mode: document.querySelector('input[name="mode"]:checked').value,
                    topic: topicInput.value,
                    tone: toneSelect.value,
                    length: lengthSelect.value,
                    platform: document.querySelector('input[name="platform"]:checked').value,
                };

                // Tampilkan loading spinner
                resultsPlaceholder.classList.add('hidden');
                resultsContent.classList.add('hidden');
                document.querySelectorAll('.platform-result').forEach(el => el.classList.add('hidden'));
                loadingSpinner.classList.remove('hidden');
                generateBtn.disabled = true; // Nonaktifkan tombol saat proses berjalan

                try {
                    // Kirim data ke back-end
                    const response = await fetch('/api/generate', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(payload),
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                    }

                    const aiResult = await response.json();

                    // Tampilkan hasil
                    loadingSpinner.classList.add('hidden');
                    resultsContent.classList.remove('hidden');

                    if (payload.mode === 'caption') {
                        captionResultsWrapper.style.display = 'block';
                        imageTextResults.style.display = 'none';
                        
                        document.getElementById('ig-caption').innerText = aiResult.caption || "Gagal memuat caption.";
                        document.getElementById('ig-hashtags').innerText = aiResult.hashtags || "#error";
                        document.getElementById('tt-caption').innerText = aiResult.caption || "Gagal memuat caption.";
                        document.getElementById('tt-hashtags').innerText = aiResult.hashtags ? aiResult.hashtags + " #fyp" : "#error #fyp";
                        document.getElementById('tw-tweet').innerText = aiResult.caption || "Gagal memuat caption.";
                        document.getElementById('tw-hashtags').innerText = aiResult.hashtags ? aiResult.hashtags.split(' ').slice(0, 3).join(' ') : "#error";
                        document.getElementById('fb-post').innerText = aiResult.caption || "Gagal memuat caption.";
                        
                        const resultToShow = document.getElementById(payload.platform + '-results');
                        if (resultToShow) resultToShow.classList.remove('hidden');
                        addCopyListenersTo(resultToShow);

                    } else { // Mode 'image-text'
                        captionResultsWrapper.style.display = 'none';
                        imageTextResults.style.display = 'block';
                        imageTextResults.classList.remove('hidden');
                        
                        document.getElementById('img-text-1').innerText = aiResult.imageTexts[0] || "Gagal memuat teks.";
                        document.getElementById('img-text-2').innerText = aiResult.imageTexts[1] || "Gagal memuat teks.";
                        document.getElementById('img-text-3').innerText = aiResult.imageTexts[2] || "Gagal memuat teks.";

                        addCopyListenersTo(imageTextResults);
                    }

                } catch (error) {
                    console.error('Error:', error);
                    loadingSpinner.classList.add('hidden');
                    resultsPlaceholder.classList.remove('hidden');
                    resultsPlaceholder.innerHTML = `<p class="text-red-400">Oops! Terjadi kesalahan: ${error.message}. Coba lagi nanti.</p>`;
                } finally {
                    generateBtn.disabled = false; // Aktifkan kembali tombol setelah selesai
                }
            }

            generateBtn.addEventListener('click', handleGeneration);
            
            // --- Event Listener Modal ---
            ideaHelperBtn.addEventListener('click', () => ideaModal.classList.remove('hidden'));
            closeModalBtn.addEventListener('click', () => ideaModal.classList.add('hidden'));
            ideaModal.addEventListener('click', (e) => { if (e.target === ideaModal) ideaModal.classList.add('hidden'); });

            topicIdeas.forEach(button => {
                button.addEventListener('click', () => {
                    topicInput.value = button.innerText;
                    checkInputs(); // Cek lagi setelah topik diisi
                    const categoryTitle = button.closest('div.flex.flex-wrap.gap-2').parentElement.querySelector('h4');
                    if(categoryTitle && categoryTitle.innerText.includes('Galau')){
                        toneSelect.value = 'galau';
                    }
                    ideaModal.classList.add('hidden');
                });
            });

            // --- Fungsi Salin ---
            function addCopyListenersTo(parentElement) {
                if (!parentElement) return;
                parentElement.querySelectorAll('.copy-btn').forEach(button => {
                    if(button.dataset.listenerAttached) return;
                    button.addEventListener('click', () => {
                        const targetId = button.dataset.copyTarget;
                        const textToCopy = document.getElementById(targetId).innerText;
                        navigator.clipboard.writeText(textToCopy).then(() => {
                            const icon = button.innerHTML;
                            button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400"><path d="M20 6 9 17l-5-5"/></svg>`;
                            setTimeout(() => { button.innerHTML = icon; }, 2000);
                        });
                    });
                    button.dataset.listenerAttached = 'true';
                });
            }
            
            // --- Style Tambahan ---
            const style = document.createElement('style');
            style.innerHTML = `
                .topic-idea-btn {
                    background-color: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    padding: 6px 12px;
                    border-radius: 8px;
                    font-size: 0.875rem;
                    transition: all 0.2s ease;
                    cursor: pointer;
                }
                .topic-idea-btn:hover {
                    background-color: rgba(255, 255, 255, 0.2);
                    border-color: rgba(255, 255, 255, 0.3);
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>

